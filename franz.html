<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Chatbot mit Google Gemini API</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f2f2;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    #chat-container {
      width: 500px;
      height: 600px;
      background: white;
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      box-shadow: 0px 4px 10px rgba(0,0,0,0.2);
      overflow: hidden;
    }
    #messages {
      flex: 1;
      padding: 15px;
      overflow-y: auto;
    }
    .message {
      margin-bottom: 12px;
      padding: 10px;
      border-radius: 8px;
    }
    .user {
      background: #d1e7dd;
      align-self: flex-end;
    }
    .bot {
      background: #f8d7da;
      align-self: flex-start;
    }
    #input-area {
      display: flex;
      border-top: 1px solid #ddd;
    }
    #user-input {
      flex: 1;
      padding: 12px;
      border: none;
      outline: none;
    }
    button {
      padding: 12px;
      border: none;
      background: #0d6efd;
      color: white;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="chat-container">
    <div id="messages"></div>
    <div id="input-area">
      <input type="text" id="user-input" placeholder="Frage zum Text stellen...">
      <button onclick="sendMessage()">Senden</button>
    </div>
  </div>

  <script>
    const API_KEY = "AIzaSyD7qb_QG18R2_svvrxyXfyK_MA3WbUZ7_g";
    const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${API_KEY}`;

    // ğŸ‘‰ Dein Text, der als Basis dient
const textPrompt = `1. Paris - Le correspondant de Tom est arrivÃ© le samedi 31 octobre. Toute la famille est allÃ©e le chercher Ã  la gare de l'Est. Il vient de Weimar en Thuringe. Il s'appelle Claas.

5 La mÃ¨re et la sÅ“ur de Tom font la bise au garÃ§on.

Claas est aussi rouge qu'une tomate. Il a prÃ©parÃ© ses premiÃ¨res phrases en franÃ§ais pendant des heures, mais maintenant, tous les mots sont partis ...

Tom lui dit: Â«Au dÃ©but, c'est difficile. Tu sais, pour 10 moi, c'est pareil pendant les cours d'allemand!Â»

2. Claas est lÃ  depuis une semaine. Avec Tom, c'est super: ils Ã©coutent de la musique, ils font du skate.

Au lycÃ©e, tous les professeurs et les Ã©lÃ¨ves sont sympas avec Claas, mais les journÃ©es sont plus 15 longues qu'en Allemagne. En plus, Claas est un peu timide. Alors, il reste avec Tom, tout le temps, partout!

Les parents de Tom rentrent toujours trÃ¨s tard, ils sont moins disponibles que les parents de Claas.

20 La famille ne mange jamais avant 20 h 30. Claas achÃ¨te des kilos de chips qu'il mange dans sa chambre. Il a un peu le mal du pays. Tom est embÃªtÃ©.

Comment aider Claas? C'est difficile! Aller au cinÃ©, faire un foot ...? Non, Tom a une meilleure idÃ©e ..

3. Ganges - Lena est arrivÃ©e Ã  Montpellier en TGV Ã  25

15h 15. Elle est impatiente, mais le voyage n'est pas fini. Ganges est Ã  une heure en voiture et le camping est perdu dans la campagne.

Les Angles, c'est magnifique! La rÃ©alitÃ© est plus belle que les photos. La famille d'AurÃ©lien est super, 30 ils ont des Ã¢nes et des chiens. Ã‡a bouge tout le temps dans cette grande famille. Par contre, pendant la semaine, il faut sortir du lit Ã  6 heures pour prendre le car du collÃ¨ge. C'est presque la nuit!

4. AprÃ¨s quinze jours, Lena connaÃ®t tout le monde

35

au collÃ¨ge. Elle est toujours avec Prune. Les copains d'AurÃ©lien lui demandent: Â«Alors, t'as perdu ta corres?Â» A la maison, c'est la mÃªme chose. Il est un peu dÃ©Ã§u. Est-ce que Ã§a va Ãªtre encore pire quand il va Ãªtre Ã  Cologne? Lena ne va pas avoir une minute 40 pour lui! Alors, AurÃ©lien Ã©change des messages avec son cousin Ã  Paris. Pour Tom, c'est le contraire! Son corres ne le quitte jamais.





1. Paris, rue des Batignolles, le 15 novembre - Ce matin, il fait froid mais il y a un grand soleil! On sonne chez Tom. Tout le monde est occupÃ© ... sauf

Claas. II va ouvrir.

5 DerriÃ¨re la porte, tous les copains et copines de Tom sont lÃ  avec des casques de vÃ©lo sur la tÃªte! Ils vont passer la journÃ©e ensemble et visiter Paris. Lola explique le programme de cette journÃ©e Ã  Claas:

Â«On va faire un tour Ã  vÃ©lo pour voir la tour Eiffel, les

10 Champs-ElysÃ©es, le Louvre ... les plus beaux monuments de la capitale!Â»

Les jeunes passent ensemble une journÃ©e gÃ©niale.

Lola fait des photos de Hakim et de Claas au TrocadÃ©ro. Ils font les trucs les plus incroyables!

15 2. Un mois plus tard, tout a changÃ©. Claas est trÃ¨s content parce qu'il a passÃ© beaucoup de temps avec Tom et ses copains et copines. En franÃ§ais, c'est plus facile, surtout quand il discute avec Lola. Le temps passe vite! Trop vite mÃªme! Il va peut-Ãªtre revenir 20 en Ã©tÃ©, chez Hakim cette fois! Pendant un Ã©change, il y a des hauts et des bas, Claas la compris.

3. Ganges, camping des Angles -

Les jeunes ont prÃ©parÃ© le repas. Lena a notÃ© une recette dans son carnet de voyage. Maintenant, elle Ã©crit en franÃ§ais! Elle continue.

Encore une journÃ©e gÃ©niale dans cet endroit super! On a fait une balade avec les Ã¢nes et les chiens. Je ne vais jamais oublier ces moments trop bien! Dans trois semaine, c'est le retour Ã  la maison.

JE VEUX RESTER!

Prune va me manquer!

4. Lena demande Ã  son corres: Â«AurÃ©, tu regardes si jai fait des fautes?Â»

AurÃ©lien lit. Il a l'air triste et en colÃ¨re.

Â«Tu as oubliÃ© de mettre un Â«sÂ» Ã  Â«semaineÂ» et tu as aussi oubliÃ© quelqu'un ...Â» Lena a compris: Â«Mais

AurÃ©lien, je n'ai pas fini!Â»

Elle Ã©crit en trÃ¨s grandes lettres dans son journal:

AURÃ‰LIEN EST LE MEILLEUR CORRES DU MONDE!`;

    const messagesContainer = document.getElementById("messages");

    // ğŸ‘‰ GesprÃ¤chshistorie speichern
    let conversation = [
      {
        role: "user",
        parts: [{
          text: `Dies ist der Kontext, auf den du dich IMMER beziehen musst:\n\n"${textPrompt}"`
        }]
      },
      {
        role: "model",
        parts: [{
          text: "Verstanden! Ich werde alle deine Fragen auf Basis dieses Textes beantworten."
        }]
      }
    ];

    function addMessage(text, sender) {
      const msg = document.createElement("div");
      msg.classList.add("message", sender);
      msg.textContent = text;
      messagesContainer.appendChild(msg);
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    async function sendMessage() {
      const inputField = document.getElementById("user-input");
      const userMessage = inputField.value.trim();
      if (!userMessage) return;

      addMessage(userMessage, "user");
      inputField.value = "";

      // Nutzerfrage in die Historie einfÃ¼gen
      conversation.push({
        role: "user",
        parts: [{ text: userMessage }]
      });

      try {
        const response = await fetch(API_URL, {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ contents: conversation })
        });

        const data = await response.json();
        const botReply = data.candidates?.[0]?.content?.parts?.[0]?.text || "Keine Antwort erhalten.";

        // Antwort anzeigen und in Historie speichern
        addMessage(botReply, "bot");
        conversation.push({
          role: "model",
          parts: [{ text: botReply }]
        });
      } catch (error) {
        addMessage("Fehler: " + error.message, "bot");
      }
    }
  </script>
</body>
</html>